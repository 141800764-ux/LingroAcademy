<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lingro Academy – Student</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>

<style>
body{
  background:linear-gradient(135deg,#1540A6,#3C6EFA,#D4AF37);
  color:#fff;
  font-family:Inter,sans-serif;
  min-height:100vh;
}
.logo{max-width:160px;margin-bottom:15px;}
video{width:100%;border-radius:15px;}
.lesson-card{
  background:rgba(255,255,255,.2);
  padding:20px;
  border-radius:15px;
}
#lessonContainer{
  background:#fff;
  color:#000;
  border-radius:15px;
  padding:15px;
  height:100%;
}
</style>
</head>

<body class="p-4">

<img src="logo.png" class="logo" alt="Lingro Academy Logo">
<h2>Lingro Academy – Student</h2>

<input id="studentId" class="form-control mb-2" placeholder="Student ID">
<button class="btn btn-success w-100 mb-3" onclick="initStudent()">Register</button>

<div class="row text-center">
  <div class="col-md-6">
    <h5>Teacher Camera</h5>
    <video id="teacherVideo" autoplay playsinline></video>
  </div>
  <div class="col-md-6">
    <h5>Lesson Screen</h5>
    <div id="lessonContainer"><p>Waiting for lesson…</p></div>
  </div>
</div>

<hr>
<h4>Self-Study Lessons</h4>

<div class="row g-3">
  <div class="col-md-3">
    <div class="lesson-card">
      <h5>Lesson 1</h5><p>Practice basics</p>
    </div>
  </div>
</div>

<script>
let peer;
const teacherVideo = document.getElementById("teacherVideo");
const lessonContainer = document.getElementById("lessonContainer");

function initStudent(){
  const id = document.getElementById("studentId").value.trim();
  peer = new Peer(id);

  peer.on("call", call=>{
    call.answer();
    call.on("stream", s=>teacherVideo.srcObject=s);
  });

  peer.on("connection", conn=>{
    conn.on("data", data=>{
      if(data.type==="lesson"){
        lessonContainer.innerHTML = data.html;
      }
    });
  });
}
</script>

</body>
</html>
