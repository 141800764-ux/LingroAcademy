<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lingro Academy – Student</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>

<style>
body{
background:linear-gradient(135deg,#1540A6,#3C6EFA,#D4AF37);
color:#fff;
font-family:Inter,sans-serif
}
video{width:100%;border-radius:15px}
</style>
</head>

<body class="p-4">

<h2>Lingro Academy – Student Dashboard</h2>

<div class="mb-3">
<input id="studentId" class="form-control" placeholder="Student ID">
<button class="btn btn-success mt-2" onclick="initStudent()">Register</button>
</div>

<div class="row text-center">
<div class="col-md-4">
<h5>Student</h5>
<video id="studentVideo" autoplay muted></video>
</div>
<div class="col-md-4">
<h5>Teacher</h5>
<video id="teacherVideo" autoplay></video>
</div>
<div class="col-md-4">
<h5>Lesson</h5>
<video id="lessonVideo" autoplay></video>
</div>
</div>

<script>
let peer;
let localStream;

const studentVideo = document.getElementById("studentVideo");
const teacherVideo = document.getElementById("teacherVideo");
const lessonVideo  = document.getElementById("lessonVideo");

navigator.mediaDevices.getUserMedia({video:true,audio:true})
.then(stream=>{
localStream = stream;
studentVideo.srcObject = stream;
});

function initStudent(){
peer = new Peer(studentId.value.trim());

peer.on("call", call => {
call.answer(localStream);
call.on("stream", stream => {
if(!teacherVideo.srcObject){
teacherVideo.srcObject = stream;
}else{
lessonVideo.srcObject = stream;
}
});
});
}
</script>

</body>
</html>
